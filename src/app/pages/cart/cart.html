<div class="cart-desktop">

  <!-- LOADING -->
  @if (isLoading()) {
    <div class="cart-skeleton">

  <!-- LEFT SIDE -->
  <div class="cart-left">
    <h2 class="page-title skeleton skeleton-text"></h2>

    @for (i of [1,2,3]; track i) {
      <div class="cart-item-skeleton">
        <div class="details">
          <div class="skeleton skeleton-title"></div>
          <div class="skeleton skeleton-price"></div>

          <div class="qty-row">
            <div class="skeleton skeleton-btn"></div>
            <div class="skeleton skeleton-qty"></div>
            <div class="skeleton skeleton-btn"></div>
          </div>

          <div class="skeleton skeleton-remove"></div>
        </div>
      </div>
    }
  </div>

  <!-- RIGHT SIDE -->
  <div class="cart-right">
    <div class="summary-box">
      <div class="skeleton skeleton-heading"></div>

      <div class="row">
        <div class="skeleton skeleton-line"></div>
        <div class="skeleton skeleton-line small"></div>
      </div>

      <div class="row">
        <div class="skeleton skeleton-line"></div>
        <div class="skeleton skeleton-line small"></div>
      </div>

      <div class="row total">
        <div class="skeleton skeleton-line"></div>
        <div class="skeleton skeleton-line small"></div>
      </div>

      <div class="skeleton skeleton-button"></div>
    </div>
  </div>

</div>

  }

  <!-- EMPTY -->
  @if (!isLoading() && (!cartService.cartItems() || cartService.cartItems()?.length === 0)) {
    <div class="empty-cart-modern">
      <div class="empty-box">
        <img src="assets/empty-cart.svg" class="empty-img" />

        <h2 class="heading">Your Cart is Empty</h2>
        <p class="subtext">Add items to your cart to continue shopping.</p>

        <button routerLink="/products" class="btn-primary start-btn">
          Browse Products
        </button>
      </div>
    </div>
  }

  <!-- CART -->
  @if (!isLoading() && cartService.cartItems() && cartService.cartItems()!.length > 0) {

    <div class="cart-left">
      <h2 class="page-title">Shopping Cart</h2>

      @for (item of cartService.cartItems()!; track item._id) {
        <div class="cart-item-modern">

          <div class="details">
            <div class="product">
                <h3 class="name">{{ item.name }}</h3>
                <p class="price">₹{{ item.price }}</p>
            </div>
            <div class="qty_remove">
                <div class="qty-row">
              <button class="qty-btn"
                (click)="cartService.updateQuantity(item._id, item.quantity - 1)">
                -
              </button>
              <span class="qty">{{ item.quantity }}</span>
              <button class="qty-btn"
                (click)="cartService.updateQuantity(item._id, item.quantity + 1)">
                +
              </button>
            </div>

            <button class="remove-btn" (click)="removeItem(item._id)">
              <i class="bi bi-trash"></i> Remove
            </button>
            </div>
          
          </div>

        </div>
      }

    </div>

    <!-- SUMMARY -->
    <div class="cart-right">
      <div class="summary-box sticky">

        <h3 class="summary-title">Price Summary</h3>

        <div class="cart_summary">
          <span>Subtotal</span>
          <strong>₹ {{ cartService.subTotal() }}</strong>
        </div>

        <div class="cart_summary">
          <span>Shipping</span>
          <strong>₹ {{ cartService.getShippingCharge() }}</strong>
        </div>

        <div class="cart_summary total">
          <span>Total</span>
          <strong>₹ {{ cartService.totalPrice() }}</strong>
        </div>

        <button class="btn-primary checkout-btn" (click)="checkout()">
          Proceed to Checkout
        </button>

        <button class="clear-btn" (click)="clearCart()">
          Clear Cart
        </button>

      </div>
    </div>

  }

</div>

@if(cartService.isLoader() || isLoader()){
  <app-loader/>
}