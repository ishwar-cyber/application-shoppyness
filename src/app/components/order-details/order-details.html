@if(ORDER_STEPS().length){

<div class="order-details-wrapper">
  <!-- CONTINUE SHOPPING -->
  <div class="continue-shopping-box">
    <button class="btn-shop" routerLink="/products">
      <i class="bi bi-bag"></i> Continue Shopping
    </button>
  </div>

  <!-- HEADER -->
  <div class="header-box">
    <h2>Order Tracking</h2>
    <p>Order #{{ orderId() }}</p>

    <div class="dates">
      <span>Order Date: {{ orderDate() }}</span>
      <span>Estimated Delivery: {{ estimatedDelivery() }}</span>
    </div>
  </div>

  <!-- CANCEL BUTTON -->
   @if(canCancelOrder() && isCancelledFlag()){
    <div class="cancel-order-box">
      <button class="btn btn-outline-danger" (click)="cancelOrder()">
        <i class="bi bi-x-circle"></i> Cancel Order
      </button>
    </div>
   }
  
  <!-- CANCELLED ALERT -->
  @if(isCancelled()){
    <div class="alert alert-danger">
      This order has been cancelled.
    </div>
  }

  <!-- TIMELINE -->
  <div class="tracking-timeline">
    @for (step of ORDER_STEPS(); track $index) {
      <div class="timeline-step">
        <!-- CIRCLE -->
        <div class="circle"  [class.completed]="step.completed" 
        [class.cancelled]="step.key === 'CANCELLED' && step.completed" >
        @if(step.completed){
           <span class="check">&#10003;</span>
        } @else {
            <div class="dot"></div>

        }
        </div>

        <!-- TEXT -->
        <div class="content">
          <div class="label">{{ step.label }}</div>
        </div>

        <!-- LINE -->
        @if($index + 1 < ORDER_STEPS().length) {
          <div class="line" [class.completed]="ORDER_STEPS()[$index + 1].completed"></div>
        }
      </div>
    }
  </div>

  <!-- SUMMARY -->
  <div class="summary-card">
    <h3>Order Summary</h3>

    <div class="summary-row">
      <span>Order Number</span>
      <strong>{{ orderId() }}</strong>
    </div>

    <div class="summary-row">
      <span>Order Date</span>
      <strong>{{ orderDate() }}</strong>
    </div>

    <div class="summary-row">
      <span>Estimated Delivery</span>
      <strong>{{ estimatedDelivery() }}</strong>
    </div>
  </div>

</div>
}
